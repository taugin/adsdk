apply plugin: 'com.android.library'

apply plugin: 'stringfog'
import com.github.megatronking.stringfog.plugin.kg.HardCodeKeyGenerator
stringfog {
    // 这是加解密 key，可以自由定义。
    kg new HardCodeKeyGenerator("string-mis-ads-sdk")
    // 开关
    enable true
    // 加解密库的实现类路径，需和上面配置的加解密算法库一致。
    implementation 'com.github.megatronking.stringfog.xor.StringFogImpl'
    // 指定需加密的代码包路径，可配置多个，未指定将默认全部加密。
    // fogPackages = ['com.xxx.xxx']
}

def isSnapshot = true
def baseVersion = '1.0.0'

android {
    compileSdk 33
    defaultConfig {
        minSdkVersion 19
        targetSdkVersion 33
        versionName baseVersion + (isSnapshot ? "-SNAPSHOT" : "")
        buildConfigField "String", "SDK_VERSION_NAME", "\"${versionName}\""
        consumerProguardFiles 'proguard-rules-adsdk.pro'
    }

    buildTypes {
        release {
            minifyEnabled true
            shrinkResources false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

    libraryVariants.all { variant ->
        variant.outputs.each { output ->
            println("output : " + output.toString())
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
}

def ADMOB = 'admob'
def APPLOVIN = 'applovin'
def FACEBOOK = 'facebook'
def MINTEGRAL = 'mintegral'
def INMOBI = 'inmobi'
def UNITY = 'unity'
def VUNGLE = 'vungle'
def IRONSOURCE = 'ironsource'
def BIGO = 'bigo'
// 广告依赖文件
ext['network'] = [ADMOB, APPLOVIN, FACEBOOK, MINTEGRAL, INMOBI, UNITY, VUNGLE, IRONSOURCE, BIGO]
apply from: '../groovy/ads.gradle'

apply plugin: 'maven-publish'
publishing {
    publications {
        AdSdk(MavenPublication) {
            groupId 'github.io'
            artifactId 'mis'
            version android.defaultConfig.versionName
            afterEvaluate {
                from components.release
            }
        }
    }
    repositories {
        def url_release = "https://packages.aliyun.com/maven/repository/2017289-release-sRvHjt/"
        def url_snapshot = "https://packages.aliyun.com/maven/repository/2017289-snapshot-sJZcRc/"
        def username1 = "5ef3647994513bd170c627be"
        def password1 = "xcgJSde4Zuo4"
        maven {
            url isSnapshot ? url_snapshot : url_release
            credentials {
                username = username1
                password = password1
            }
        }
    }
}

publishing {
    publications {
        AXMLEditor(MavenPublication) {
            groupId 'cn.wjdiankong'
            artifactId 'axmleditor'
            version '1.0.4'
            artifact 'D:\\github\\tools\\lib\\AXMLEditor.jar'
        }
    }
    repositories {
        def url_release = "https://packages.aliyun.com/maven/repository/2017289-release-sRvHjt/"
        def url_snapshot = "https://packages.aliyun.com/maven/repository/2017289-snapshot-sJZcRc/"
        def username1 = "5ef3647994513bd170c627be"
        def password1 = "xcgJSde4Zuo4"
        maven {
            url url_release
            credentials {
                username = username1
                password = password1
            }
        }
    }
}